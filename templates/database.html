{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">üóÑÔ∏è InfluxDB-Konfiguration</h1>

<form method="post" class="space-y-4 bg-white p-4 rounded shadow">
  {% for key, value in config.items() %}
  <div>
    <label class="block font-semibold">{{ key }}</label>
    <input name="{{ key }}" value="{{ value }}" class="w-full border p-2 rounded" />
    <p class="text-sm text-gray-500">{{ descriptions[key] }}</p>
  </div>
  {% endfor %}

  <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
    üíæ Speichern
  </button>
</form>

<script>
async function saveConfig(event) {
  event.preventDefault();
  const form = document.getElementById('configForm');
  const formData = new FormData(form);
  const response = await fetch('{{ url_for("update_config") }}', { method: 'POST', body: formData });
  const result = await response.json();

  const box = document.getElementById("messageBox");
  box.classList.remove("hidden");
  box.textContent = result.message;
  box.className = result.success
    ? "p-3 rounded bg-green-200 text-green-800 mb-4"
    : "p-3 rounded bg-red-200 text-red-800 mb-4";
}

{% endblock %}
