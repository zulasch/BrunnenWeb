{% extends "base.html" %}
{% block content %}
<h2 class="text-xl font-bold mb-4">ğŸ“ˆ Aktuelle Messwerte</h2>

<div id="data" class="bg-white rounded-xl p-4 shadow text-lg space-y-2">
  <p><b>ğŸ•’ Zeit:</b> <span id="ts">{{ data.timestamp }}</span></p> 
  <p><b>ğŸ”Œ Strom:</b> <span id="current">{{ data.current_mA }}</span> mA</p>
  <p><b>ğŸŒŠ Wassertiefe:</b> <span id="depth">{{ data.depth_m }}</span> m</p>
  <p><b>ğŸï¸ WasseroberflÃ¤che unter GelÃ¤nde:</b> <span id="surf">{{ data.water_surface_m }}</span> m</p>
  <p><b>ğŸ“ Pegel Ã¼ber NN:</b> <span id="nn">{{ data.nn_level_m }}</span> m Ã¼. NN</p>
</div>

<script>
async function update(){
  const res = await fetch('/api/measurements');
  const data = await res.json();
  if(!data.error){
    document.getElementById('ts').innerText = data.timestamp;
    document.getElementById('current').innerText = data.current_mA.toFixed(2);
    document.getElementById('depth').innerText = data.depth_m.toFixed(2);
    document.getElementById('surf').innerText = data.water_surface_m.toFixed(2);
    document.getElementById('nn').innerText = data.nn_level_m.toFixed(2);
  }
}
setInterval(update, 5000);
</script>
{% endblock %}
